{% extends 'base.html.twig' %}

{% block title %}Items Collection{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('style/items.css') }}">
{% endblock %}
{% block body %}
    {% include 'header.html.twig' %}
    {% if app.user == itemCollection.creator or app.user.roles[0] == 'ROLE_ADMIN' %}
        <a class="create-item-link" href="{{ path('app_create_item', {id: itemCollection.id}) }}">
            <button class="btn create-btn">Create new item</button>
        </a>
    {% endif %}
    <div class="collection-wrapper">
        {% if itemCollection.picture %}
            <figure class="collection-picture"><img src="{{ asset('uploads/pictures/' ~ itemCollection.picture) }}"
                                                    alt="image collection" width="170"></figure>
        {% endif %}

        <ul class="collection-list" style="margin-bottom: -10px;">
            <li class="collection-list-item"><em>Name collection</em>: {{ itemCollection.name }}</li>
            <li class="collection-list-item">
                <em>Description</em>: {{ itemCollection.description|striptags('<b><i><strong><em>')|markdown }}</li>
        </ul>
    </div>


    {% if items|length != 0 %}
        <table class="table table-striped table-items">
            <caption>{{ itemCollection.topic }}</caption>
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Tags</th>
                <th scope="col">Action</th>
            </tr>
            </thead>
            <tbody>
            {% for item in items %}
                <tr>
                    <th scope="row">{{ loop.index }}</th>
                    <td>{{ item.name }}</td>
                    <td width="400">{% for tag in item.tags %}<a href="#" style="text-decoration: none;">#{{ tag.name }}</a> {% endfor %}</td>
                    <td><a href="#">edit</a> <a href="#">view</a></td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p style="text-align: center;">Items not found :(</p>
    {% endif %}
{% endblock %}
